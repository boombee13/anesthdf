<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anesthesia Unit Calculator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        // ปรับแต่ง Tailwind config เล็กน้อยเพื่อให้ได้สี Teal ที่ดูนุ่มนวลขึ้นสำหรับธีมพาสเทล
        tailwind.config = {
          theme: {
            extend: {
              colors: {
                // สามารถเพิ่ม custom color ตรงนี้ได้ถ้าต้องการ แต่การใช้ palette มาตรฐานของ tailwind (teal/green/slate) ก็เพียงพอสำหรับลุคนี้
              }
            }
          }
        }
      </script>
</head>
<body class="bg-green-50 min-h-screen flex items-center justify-center p-4 font-sans">

    <div class="bg-white p-8 rounded-xl shadow-lg shadow-green-100/50 w-full max-w-md">
        <h2 class="text-2xl font-bold text-teal-800 mb-4 text-center">Anesthesia Unit Calculator</h2>

        <div class="flex border-b border-slate-200 mb-6">
            <button id="btnCalcTab" class="flex-1 py-2 text-center font-semibold text-teal-600 border-b-2 border-teal-500 transition duration-200">
                Calculator
            </button>
            <button id="btnRefTab" class="flex-1 py-2 text-center font-semibold text-slate-500 hover:text-teal-600 border-b-2 border-transparent transition duration-200">
                References
            </button>
        </div>

        <div id="calculatorContent">
            <div class="space-y-5">
                
                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">ASA Physical Status</label>
                    <select id="asa" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400">
                        <option value="0">choose ...</option>
                        <option value="0">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Emergency</label>
                    <select id="emergency" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400">
                        <option value="0">No</option>
                        <option value="1">Yes</option>
                    </select>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-2">Special Procedure</label>
                    <div class="space-y-2 bg-green-50 p-3 rounded-md border border-green-100">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="special-proc w-4 h-4 text-teal-500 rounded border-slate-300 focus:ring-teal-400">
                            <span class="text-slate-700">Arterial Cannulation</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="special-proc w-4 h-4 text-teal-500 rounded border-slate-300 focus:ring-teal-400">
                            <span class="text-slate-700">Central Venous Cannulation</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="special-proc w-4 h-4 text-teal-500 rounded border-slate-300 focus:ring-teal-400">
                            <span class="text-slate-700">Pulmonary Artery Catheter Insertion</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="special-proc w-4 h-4 text-teal-500 rounded border-slate-300 focus:ring-teal-400">
                            <span class="text-slate-700">Fiberoptic Endotracheal Intubation</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="checkbox" class="special-proc w-4 h-4 text-teal-500 rounded border-slate-300 focus:ring-teal-400">
                            <span class="text-slate-700">Double Lumen Endotracheal Tube</span>
                        </label>
                    </div>
                </div>

                <div>
                    <label class="block text-sm font-medium text-slate-700 mb-1">Surgical Risk</label>
                    <select id="surgicalRisk" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400">
                        <option value="0">choose...</option>
                        <optgroup label="Moderate Surgical Risk" class="text-slate-900 font-semibold">
                            <option value="4" class="font-normal">การผ่าตัดในช่วงทรวงอก ปอด หลอดอาหาร</option>
                            <option value="4" class="font-normal">การผ่าตัดใหญ่เปิดกะโหลกศีรษะจาก Head Injuries</option>
                            <option value="4" class="font-normal">การผ่าตัดใหญ่ของ Larynx และ Trachea</option>
                            <option value="4" class="font-normal">หัตถการที่ต้องอยู่ในห้อง CT, MRI, X-Ray หรือ Interventional Suite</option>
                        </optgroup>
                        <optgroup label="High Surgical Risk" class="text-slate-900 font-semibold">
                            <option value="8" class="font-normal">การผ่าตัดใหญ่เปิดกะโหลกศีรษะที่ไม่ใช่ Head Injuries</option>
                            <option value="8" class="font-normal">Major Craniofacial Reconstruction</option>
                            <option value="8" class="font-normal">การผ่าตัด Closed Heart ที่ไม่ใช้ Cardiopulmonary Bypass</option>
                        </optgroup>
                        <optgroup label="Very High Surgical Risk" class="text-slate-900 font-semibold">
                            <option value="12" class="font-normal">การผ่าตัดที่ต้องใช้ Cardiopulmonary Bypass</option>
                            <option value="12" class="font-normal">การผ่าตัดหลอดเลือดแดงใหญ่ (Aorta) ในช่องท้องหรือทรวงอก</option>
                            <option value="12" class="font-normal">การผ่าตัด Major Organ Transplant ได้แก่ หัวใจ ปอด ตับ (ยกเว้นไตและกระจกตา)</option>
                            <option value="12" class="font-normal">การผ่าตัดเพื่อตัดต่อหลอดเลือดที่ไปเลี้ยงสมอง</option>
                        </optgroup>
                    </select>
                </div>

                <div class="pt-2">
                    <label class="block text-sm font-medium text-slate-700 mb-3">Time Unit</label>
                    
                    <div class="flex space-x-5 mb-3 bg-white">
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="timeMode" value="manual" checked class="w-4 h-4 text-teal-500 focus:ring-teal-400 border-slate-300">
                            <span class="text-sm text-slate-700">กรอกจำนวน Unit เอง</span>
                        </label>
                        <label class="flex items-center space-x-2 cursor-pointer">
                            <input type="radio" name="timeMode" value="auto" class="w-4 h-4 text-teal-500 focus:ring-teal-400 border-slate-300">
                            <span class="text-sm text-slate-700">คำนวณจากเวลา</span>
                        </label>
                    </div>

                    <div id="manualTimeArea">
                        <input type="number" id="timeUnit" min="0" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400 placeholder-slate-400" placeholder="ทุก 15 นาทีที่เกินจาก 30 นาทีแรก คิดเป็น 1 unit (เศษปัดขึ้น)">
                    </div>

                    <div id="autoTimeArea" class="hidden space-y-3 p-4 bg-green-50 rounded-md border border-green-100">
                        <div class="flex space-x-4">
                            <div class="w-1/2">
                                <label class="block text-xs font-medium text-slate-500 mb-1">เวลาเริ่ม (Start)</label>
                                <input type="time" id="startTime" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400">
                            </div>
                            <div class="w-1/2">
                                <label class="block text-xs font-medium text-slate-500 mb-1">เวลาสิ้นสุด (End)</label>
                                <input type="time" id="endTime" class="block w-full rounded-md border-slate-300 shadow-sm p-2 border focus:ring-teal-400 focus:border-teal-400">
                            </div>
                        </div>
                        <div class="flex justify-between items-center pt-3 border-t border-green-200">
                            <span class="text-sm text-slate-600">ระยะเวลา: <span id="durationDisplay" class="font-semibold text-slate-800">0 นาที</span></span>
                            <span class="text-sm text-slate-600">คิดเป็น: <span id="calculatedTimeUnit" class="font-bold text-lg text-teal-600">0</span> Unit</span>
                        </div>
                        <p class="text-xs text-slate-400 mt-1">* ทุก 15 นาทีที่เกินจาก 30 นาทีแรก คิดเป็น 1 unit (เศษปัดขึ้น)</p>
                    </div>
                </div>

            </div>

            <div class="mt-8 pt-6 border-t border-slate-200">
                <div class="flex justify-between items-center mb-4">
